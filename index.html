<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DETECH - AI-Powered ATS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --primary-color: #667eea;
            --success-color: #22c55e;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            --background: #f8fafc;
            --surface: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
        }

        body {
            font-family: 'Inter', system-ui, sans-serif;
            background: var(--primary-gradient);
            min-height: 100vh;
            color: var(--text-primary);
        }

        /* LOGIN SCREEN */
        .login-screen {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            position: relative;
            overflow: hidden;
        }

        .login-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        }

        .login-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 3rem;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideUp 0.6s ease-out;
            position: relative;
            z-index: 1;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-header h1 {
            font-size: 3rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
            letter-spacing: -1px;
        }

        .login-header p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        input[type="email"], input[type="password"] {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: var(--surface);
        }

        input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
        }

        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .demo-accounts {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.05));
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 2rem;
            border: 1px solid rgba(102, 126, 234, 0.15);
        }

        .demo-accounts h3 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
            text-align: center;
        }

        .demo-account {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: var(--surface);
            border-radius: 10px;
            margin-bottom: 0.5rem;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .demo-account:hover {
            border-color: var(--primary-color);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .demo-account:last-child {
            margin-bottom: 0;
        }

        .demo-info {
            display: flex;
            flex-direction: column;
        }

        .demo-role {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        .demo-email {
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin-top: 2px;
        }

        .demo-password {
            font-family: 'Monaco', monospace;
            font-size: 0.8rem;
            color: var(--primary-color);
            font-weight: 600;
        }

        /* MAIN DASHBOARD */
        .dashboard {
            display: none;
            min-height: 100vh;
            background: var(--background);
        }

        .navbar {
            background: var(--surface);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-brand {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .navbar-user {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-info {
            text-align: right;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: capitalize;
        }

        .logout-btn {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .main-content {
            padding: 2rem;
        }

        .welcome-section {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }

        .welcome-title {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .welcome-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .feature-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .feature-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* AI ANALYZER INTERFACE */
        .ai-analyzer {
            display: none;
        }

        .analyzer-header {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .analyzer-title {
            font-size: 2.5rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .analyzer-subtitle {
            color: var(--text-secondary);
            font-size: 1.2rem;
        }

        .analyzer-form {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .file-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.05);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.7;
        }

        .upload-text {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .upload-subtext {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }

        .analyze-btn {
            width: 100%;
            padding: 1.25rem 2rem;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* RESULTS SECTION */
        .results-section {
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .score-card {
            background: var(--surface);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }

        .match-score {
            font-size: 5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-label {
            color: var(--text-secondary);
            font-size: 1.2rem;
            font-weight: 600;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .insight-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid;
        }

        .insight-card.missing {
            border-left-color: var(--danger-color);
        }

        .insight-card.strengths {
            border-left-color: var(--success-color);
        }

        .insight-card.recommendations {
            border-left-color: var(--info-color);
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .insight-title {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .tag.missing {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
        }

        .tag.strength {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success-color);
        }

        .recommendations-list {
            list-style: none;
            padding: 0;
        }

        .recommendations-list li {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
            position: relative;
            padding-left: 2rem;
        }

        .recommendations-list li:before {
            content: '💡';
            position: absolute;
            left: 0;
            top: 0.75rem;
        }

        .recommendations-list li:last-child {
            border-bottom: none;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .login-container {
                padding: 2rem 1.5rem;
                margin: 1rem;
            }

            .login-header h1 {
                font-size: 2.5rem;
            }

            .navbar {
                padding: 1rem;
            }

            .navbar-brand {
                font-size: 1.5rem;
            }

            .main-content {
                padding: 1rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .match-score {
                font-size: 3.5rem;
            }

            .insights-grid {
                grid-template-columns: 1fr;
            }
        }

        /* UTILITY CLASSES */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mb-0 { margin-bottom: 0; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }

        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--danger-color);
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1rem;
        }

        /* ANIMATIONS */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <!-- LOGIN SCREEN -->
    <div class="login-screen" id="loginScreen">
        <div class="login-container">
            <div class="login-header">
                <h1>DETECH</h1>
                <p>AI-Powered Recruitment Platform</p>
            </div>

            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" required>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                </div>

                <button type="submit" class="login-btn">
                    🚀 Access DETECH Platform
                </button>
            </form>

            <div class="demo-accounts">
                <h3>🎯 Quick Demo Access</h3>
                
                <div class="demo-account" onclick="quickLogin('demo.candidate@detech.com', 'demo123')">
                    <div class="demo-info">
                        <div class="demo-role">👤 Job Candidate</div>
                        <div class="demo-email">demo.candidate@detech.com</div>
                    </div>
                    <div class="demo-password">demo123</div>
                </div>

                <div class="demo-account" onclick="quickLogin('demo.recruiter@detech.com', 'demo123')">
                    <div class="demo-info">
                        <div class="demo-role">🎯 Recruiter</div>
                        <div class="demo-email">demo.recruiter@detech.com</div>
                    </div>
                    <div class="demo-password">demo123</div>
                </div>

                <div class="demo-account" onclick="quickLogin('demo.hr@detech.com', 'demo123')">
                    <div class="demo-info">
                        <div class="demo-role">👥 HR Manager</div>
                        <div class="demo-email">demo.hr@detech.com</div>
                    </div>
                    <div class="demo-password">demo123</div>
                </div>

                <div class="demo-account" onclick="quickLogin('guest.user@detech.com', 'guest123')">
                    <div class="demo-info">
                        <div class="demo-role">🌟 Guest User</div>
                        <div class="demo-email">guest.user@detech.com</div>
                    </div>
                    <div class="demo-password">guest123</div>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN DASHBOARD -->
    <div class="dashboard" id="dashboard">
        <nav class="navbar">
            <div class="navbar-brand">DETECH</div>
            <div class="navbar-user">
                <div class="user-info">
                    <div class="user-name" id="userName">Demo User</div>
                    <div class="user-role" id="userRole">candidate</div>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </nav>

        <div class="main-content">
            <!-- WELCOME SECTION -->
            <div class="welcome-section" id="welcomeSection">
                <h2 class="welcome-title">Welcome to DETECH</h2>
                <p class="welcome-subtitle">Your AI-powered recruitment platform for smarter hiring decisions</p>

                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🤖</div>
                        <h3 class="feature-title">AI Resume Analysis</h3>
                        <p class="feature-description">Advanced AI algorithms analyze resumes against job descriptions for precise matching and scoring.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">📊</div>
                        <h3 class="feature-title">Smart Analytics</h3>
                        <p class="feature-description">Get detailed insights, missing keywords, and improvement recommendations for better candidate evaluation.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">⚡</div>
                        <h3 class="feature-title">Lightning Fast</h3>
                        <p class="feature-description">Process and analyze hundreds of resumes in minutes, not hours. Streamline your recruitment workflow.</p>
                    </div>

                    <div class="feature-card">
                        <div class="feature-icon">🎯</div>
                        <h3 class="feature-title">Perfect Matching</h3>
                        <p class="feature-description">Find the ideal candidates with precision matching algorithms that understand context and requirements.</p>
                    </div>
                </div>

                <button class="analyze-btn" onclick="showAnalyzer()" style="max-width: 400px; margin: 0 auto; display: block;">
                    🚀 Start AI Analysis
                </button>
            </div>

            <!-- AI ANALYZER INTERFACE -->
            <div class="ai-analyzer" id="aiAnalyzer">
                <div class="analyzer-header">
                    <h2 class="analyzer-title">🤖 DETECH AI Analyzer</h2>
                    <p class="analyzer-subtitle">Upload a resume and job description to get instant AI-powered insights</p>
                </div>

                <div class="analyzer-form">
                    <form id="analysisForm">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>📄 Upload Resume</label>
                                <div class="file-upload-area" id="fileUploadArea">
                                    <div class="upload-icon">📎</div>
                                    <div class="upload-text">Drop resume here or click to browse</div>
                                    <div class="upload-subtext">Supports PDF, DOCX files (Max: 10MB)</div>
                                </div>
                                <input type="file" id="resumeFile" accept=".pdf,.docx" style="display: none;" required>
                            </div>

                            <div class="form-group">
                                <label for="jobDescription">💼 Job Description</label>
                                <textarea 
                                    id="jobDescription" 
                                    placeholder="Paste the complete job description here...

Example: We are looking for a Senior Software Engineer with 5+ years of experience in Python, JavaScript, React, Node.js, AWS cloud services, Docker containerization, and Agile development methodologies..."
                                    required
                                ></textarea>
                            </div>
                        </div>

                        <button type="submit" class="analyze-btn" id="analyzeBtn">
                            🤖 Analyze with DETECH AI
                        </button>
                    </form>
                </div>

                <!-- RESULTS SECTION -->
                <div class="results-section" id="resultsSection">
                    <!-- Results will be dynamically populated here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let analysisInProgress = false;

        // Demo user accounts
        const demoAccounts = {
            'demo.candidate@detech.com': {
                password: 'demo123',
                name: 'Alex Johnson',
                role: 'candidate',
                features: ['ai_analysis', 'job_search', 'application_tracking']
            },
            'demo.recruiter@detech.com': {
                password: 'demo123', 
                name: 'Sarah Chen',
                role: 'recruiter',
                features: ['ai_analysis', 'candidate_management', 'batch_processing']
            },
            'demo.hr@detech.com': {
                password: 'demo123',
                name: 'Michael Rodriguez',
                role: 'hr_manager',
                features: ['ai_analysis', 'analytics_dashboard', 'team_management', 'batch_processing']
            },
            'guest.user@detech.com': {
                password: 'guest123',
                name: 'Guest User',
                role: 'guest',
                features: ['ai_analysis']
            }
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeFileUpload();
            initializeForm();
        });

        // Quick login function
        function quickLogin(email, password) {
            document.getElementById('email').value = email;
            document.getElementById('password').value = password;
            
            // Add visual feedback
            const loginBtn = document.querySelector('.login-btn');
            loginBtn.textContent = '🚀 Logging in...';
            loginBtn.disabled = true;
            
            setTimeout(() => {
                login(email, password);
            }, 500);
        }

        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            login(email, password);
        });

        // Login function
        function login(email, password) {
            const account = demoAccounts[email];
            
            if (account && account.password === password) {
                currentUser = {
                    email: email,
                    name: account.name,
                    role: account.role,
                    features: account.features
                };
                
                // Update UI
                document.getElementById('userName').textContent = account.name;
                document.getElementById('userRole').textContent = account.role;
                
                // Switch to dashboard
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('dashboard').style.display = 'block';
                
                console.log('✅ Login successful:', currentUser);
            } else {
                alert('❌ Invalid credentials. Please use one of the demo accounts provided.');
                
                // Reset login button
                const loginBtn = document.querySelector('.login-btn');
                loginBtn.textContent = '🚀 Access DETECH Platform';
                loginBtn.disabled = false;
            }
        }

        // Logout function
        function logout() {
            currentUser = null;
            document.getElementById('dashboard').style.display = 'none';
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('welcomeSection').style.display = 'block';
            document.getElementById('aiAnalyzer').style.display = 'none';
            
            // Reset forms
            document.getElementById('loginForm').reset();
            document.getElementById('analysisForm').reset();
            document.getElementById('resultsSection').style.display = 'none';
            
            console.log('👋 User logged out');
        }

        // Show analyzer
        function showAnalyzer() {
            document.getElementById('welcomeSection').style.display = 'none';
            document.getElementById('aiAnalyzer').style.display = 'block';
        }

        // Back to dashboard
        function backToDashboard() {
            document.getElementById('aiAnalyzer').style.display = 'none';
            document.getElementById('welcomeSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
        }

        // Initialize file upload
        function initializeFileUpload() {
            const fileUploadArea = document.getElementById('fileUploadArea');
            const fileInput = document.getElementById('resumeFile');

            fileUploadArea.addEventListener('click', () => fileInput.click());

            fileUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                fileUploadArea.style.borderColor = 'var(--primary-color)';
                fileUploadArea.style.background = 'rgba(102, 126, 234, 0.05)';
            });

            fileUploadArea.addEventListener('dragleave', () => {
                fileUploadArea.style.borderColor = 'var(--border-color)';
                fileUploadArea.style.background = '';
            });

            fileUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                fileUploadArea.style.borderColor = 'var(--border-color)';
                fileUploadArea.style.background = '';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    fileInput.files = files;
                    updateFileDisplay(files[0]);
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    updateFileDisplay(e.target.files[0]);
                }
            });
        }

        // Update file display
        function updateFileDisplay(file) {
            const fileUploadArea = document.getElementById('fileUploadArea');
            const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
            const isValidSize = file.size <= 10 * 1024 * 1024;
            const isValidType = ['.pdf', '.docx'].some(ext => file.name.toLowerCase().endsWith(ext));
            
            fileUploadArea.innerHTML = `
                <div class="upload-icon">${isValidType && isValidSize ? '✅' : '⚠️'}</div>
                <div class="upload-text">Selected: ${file.name}</div>
                <div class="upload-subtext">Size: ${sizeInMB} MB</div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: ${isValidType && isValidSize ? 'var(--success-color)' : 'var(--danger-color)'}; font-weight: 500;">
                    ${isValidType && isValidSize ? '✅ Ready for analysis!' : 
                      !isValidType ? '❌ Invalid file type. Use PDF or DOCX' : 
                      '❌ File too large. Maximum 10MB allowed'}
                </div>
            `;
        }

        // Initialize form handler
        function initializeForm() {
            document.getElementById('analysisForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (analysisInProgress) return;

                const resumeFile = document.getElementById('resumeFile').files[0];
                const jobDescription = document.getElementById('jobDescription').value.trim();
                
                // Validation
                if (!resumeFile) {
                    alert('❌ Please upload a resume file');
                    return;
                }
                
                if (!jobDescription || jobDescription.length < 50) {
                    alert('❌ Please provide a detailed job description (at least 50 characters)');
                    return;
                }

                await performAnalysis(resumeFile, jobDescription);
            });
        }

        // Perform AI analysis
        async function performAnalysis(resumeFile, jobDescription) {
            analysisInProgress = true;
            
            const analyzeBtn = document.getElementById('analyzeBtn');
            const originalText = analyzeBtn.innerHTML;
            
            // Show loading state
            analyzeBtn.innerHTML = '⏳ DETECH AI is analyzing...';
            analyzeBtn.disabled = true;
            
            showLoadingState();

            try {
                // Simulate AI analysis (replace with actual API call)
                const result = await simulateAIAnalysis(resumeFile, jobDescription);
                
                // Show results
                showResults(result);
                
            } catch (error) {
                console.error('Analysis error:', error);
                showError('Analysis failed: ' + error.message);
            } finally {
                // Reset button
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
                analysisInProgress = false;
            }
        }

        // Show loading state
        function showLoadingState() {
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').innerHTML = `
                <div class="loading">
                    <div style="font-size: 4rem; margin-bottom: 1rem;" class="pulse">🤖</div>
                    <h3 style="color: var(--primary-color); margin-bottom: 1rem;">DETECH AI is analyzing your resume...</h3>
                    <p>This process may take 10-15 seconds. Please wait while our AI processes your information.</p>
                </div>
            `;
            
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Simulate AI analysis (replace with actual API)
        async function simulateAIAnalysis(resumeFile, jobDescription) {
            // Simulate processing time
            await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 3000));
            
            // Extract some keywords for demo
            const jobWords = jobDescription.toLowerCase().split(/\s+/);
            const techKeywords = ['python', 'javascript', 'react', 'node.js', 'aws', 'docker', 'git', 'agile', 'sql', 'html', 'css'];
            
            const foundKeywords = techKeywords.filter(keyword => 
                jobWords.some(word => word.includes(keyword))
            );
            
            const missingKeywords = foundKeywords.slice(Math.floor(foundKeywords.length / 2));
            const strengths = foundKeywords.slice(0, Math.floor(foundKeywords.length / 2));
            
            const matchPercentage = Math.floor(60 + Math.random() * 35); // 60-95%
            
            return {
                match_percentage: matchPercentage,
                missing_keywords: missingKeywords.length > 0 ? missingKeywords : ['React', 'AWS', 'Docker'],
                strengths: strengths.length > 0 ? strengths : ['Python', 'JavaScript', 'Problem Solving'],
                recommendations: [
                    'Add more specific examples of projects using the required technologies',
                    'Include quantifiable achievements and metrics in your experience',
                    'Highlight relevant certifications and training',
                    'Use more keywords from the job description throughout your resume'
                ],
                summary: `The resume shows ${matchPercentage >= 80 ? 'strong' : matchPercentage >= 70 ? 'good' : 'moderate'} alignment with the job requirements. ${
                    matchPercentage >= 80 ? 'Excellent technical background with most required skills present.' :
                    matchPercentage >= 70 ? 'Solid foundation with room for improvement in specific areas.' :
                    'Basic qualifications present but needs enhancement to better match requirements.'
                }`,
                analyzed_at: new Date().toISOString(),
                processing_time_ms: 2500
            };
        }

        // Show analysis results
        function showResults(data) {
            const score = data.match_percentage || 0;
            const scoreClass = score >= 80 ? 'excellent' : score >= 70 ? 'good' : score >= 60 ? 'fair' : 'poor';
            const scoreColor = score >= 80 ? 'var(--success-color)' : 
                               score >= 70 ? 'var(--info-color)' : 
                               score >= 60 ? 'var(--warning-color)' : 'var(--danger-color)';
            
            let resultsHTML = `
                <div class="score-card">
                    <div class="match-score" style="background: linear-gradient(135deg, ${scoreColor}, ${scoreColor}); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">${score}%</div>
                    <div class="score-label">DETECH AI Match Score</div>
                </div>
            `;
            
            if (data.summary) {
                resultsHTML += `
                    <div style="background: var(--surface); padding: 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <span>📝</span> AI Analysis Summary
                        </h3>
                        <p style="line-height: 1.7; color: var(--text-primary);">${data.summary}</p>
                    </div>
                `;
            }
            
            resultsHTML += '<div class="insights-grid">';
            
            // Missing Keywords
            if (data.missing_keywords && data.missing_keywords.length > 0) {
                resultsHTML += `
                    <div class="insight-card missing">
                        <div class="insight-header">
                            <span style="color: var(--danger-color);">❌</span>
                            <h3 class="insight-title" style="color: var(--danger-color);">Missing Keywords</h3>
                        </div>
                        <div class="tags">
                            ${data.missing_keywords.map(keyword => `<span class="tag missing">${keyword}</span>`).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Strengths
            if (data.strengths && data.strengths.length > 0) {
                resultsHTML += `
                    <div class="insight-card strengths">
                        <div class="insight-header">
                            <span style="color: var(--success-color);">✅</span>
                            <h3 class="insight-title" style="color: var(--success-color);">Your Strengths</h3>
                        </div>
                        <div class="tags">
                            ${data.strengths.map(strength => `<span class="tag strength">${strength}</span>`).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Recommendations
            if (data.recommendations && data.recommendations.length > 0) {
                resultsHTML += `
                    <div class="insight-card recommendations">
                        <div class="insight-header">
                            <span style="color: var(--info-color);">💡</span>
                            <h3 class="insight-title" style="color: var(--info-color);">DETECH AI Recommendations</h3>
                        </div>
                        <ul class="recommendations-list">
                            ${data.recommendations.map(rec => `<li>${rec}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            resultsHTML += '</div>';
            
            // Action buttons
            resultsHTML += `
                <div style="text-align: center; margin-top: 2rem;">
                    <button onclick="downloadReport()" style="background: var(--success-color); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; margin-right: 1rem; cursor: pointer; transition: all 0.2s ease;">
                        📥 Download Report
                    </button>
                    <button onclick="analyzeAnother()" style="background: var(--info-color); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; margin-right: 1rem; cursor: pointer; transition: all 0.2s ease;">
                        🔄 Analyze Another
                    </button>
                    <button onclick="backToDashboard()" style="background: var(--text-secondary); color: white; border: none; padding: 1rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s ease;">
                        🏠 Back to Dashboard
                    </button>
                </div>
            `;
            
            document.getElementById('resultsSection').innerHTML = resultsHTML;
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Show error
        function showError(message) {
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').innerHTML = `
                <div class="error">
                    <div style="font-size: 2rem; margin-bottom: 1rem;">❌</div>
                    <h3>Analysis Failed</h3>
                    <p>${message}</p>
                    <p style="margin-top: 1rem;">Please try again or contact support if the problem persists.</p>
                </div>
            `;
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Download report
        function downloadReport() {
            const content = document.getElementById('resultsSection').textContent || 'DETECH AI Resume Analysis Report';
            const blob = new Blob([content], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `DETECH-Analysis-Report-${new Date().getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }

        // Analyze another resume
        function analyzeAnother() {
            document.getElementById('analysisForm').reset();
            document.getElementById('resultsSection').style.display = 'none';
            
            // Reset file upload area
            document.getElementById('fileUploadArea').innerHTML = `
                <div class="upload-icon">📎</div>
                <div class="upload-text">Drop resume here or click to browse</div>
                <div class="upload-subtext">Supports PDF, DOCX files (Max: 10MB)</div>
            `;
            
            // Scroll to form
            document.getElementById('aiAnalyzer').scrollIntoView({ behavior: 'smooth' });
        }

        // Console welcome message
        console.log(`
🚀 Welcome to DETECH - AI-Powered ATS!

Available demo accounts:
👤 Candidate: demo.candidate@detech.com / demo123
🎯 Recruiter: demo.recruiter@detech.com / demo123  
👥 HR Manager: demo.hr@detech.com / demo123
🌟 Guest: guest.user@detech.com / guest123

Features:
✅ AI-powered resume analysis
✅ Smart candidate matching
✅ Detailed insights and recommendations
✅ Professional reporting

Ready to revolutionize your recruitment process!
        `);
    </script>
</body>
</html>